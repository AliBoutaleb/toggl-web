<section class="timer">
    <!--<h3><timer interval="1000">{{hours}} hour{{hoursS}}, {{minutes}} minute{{minutesS}}, {{seconds}} second{{secondsS}}.</timer></h3>-->
    <!--<button ng-click="startTimer()" ng-disabled="timerRunning">Start Timer</button>-->
    <!--<button ng-click="stopTimer()" ng-disabled="!timerRunning">Stop Timer</button>-->
    <div class="content-wrapper">
        <div class="container-fluid">
            <div class="card">
                <div class="card-header">
                    <i class="fa fa-align-justify"></i> Liste des tâches
                </div>
                <div class="card-block">
                    <div class="row col-md-12" style="margin-bottom: 15px;">
                        <div class="col-sm-2" style="margin-top: 10px;">
                            <button type="button" class="btn btn-success" style="width:175px;" ng-click="addTask()">
                                Ajouter une tâche
                            </button>
                        </div>
                    </div>
                    <div class="row col-md-12">
                        <div class="col-sm-12">
                            <form name="formulaire" ng-submit="saveTasks()">
                                <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th>Libelle</th>
                                        <th>Projet</th>
                                        <th>Equipe</th>
                                        <th>Réalisateur</th>
                                        <th>Temps</th>
                                        <th>Actions</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr class="animate-repeat" ng-repeat="task in tasks">
                                        <td><input type="text" class="form-control" name="libelle"
                                                   ng-model="task.libelle" disabled></td>
                                        <td><input type="text" class="form-control" name="project"
                                                   ng-model="task.project" disabled></td>
                                        <td><input type="text" class="form-control" name="team" ng-model="task.team"
                                                   disabled></td>
                                        <td><input type="text" class="form-control" name="performer"
                                                   ng-model="task.performer" disabled></td>
                                        <td>
                                            <timer interval="1000">{{hours}} hour{{hoursS}}, {{minutes}}
                                                minute{{minutesS}}, {{seconds}} second{{secondsS}}.
                                            </timer>
                                        </td>
                                        <td>
                                            <button ng-click="startTimer()" ng-disabled="timerRunning">Start Timer
                                            </button>
                                            <button ng-click="stopTimer()" ng-disabled="!timerRunning">Stop Timer
                                            </button>
                                            <button type="button" class="btn btn-outline-danger"
                                                    ng-click="deleteTask(index)"><i class="fa fa-eraser"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                                <div style="width:175px; margin-bottom: 10px ">
                                    <input type="submit" id="submit" class="btn btn-block btn-success"
                                           value="Sauvegarder"/>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

$scope.startTimer = function (){
$scope.$broadcast('timer-start');
$scope.timerRunning = true;
};

$scope.stopTimer = function (){
$scope.$broadcast('timer-stop');
$scope.timerRunning = false;
};

$scope.$on('timer-stopped', function (event, data){
console.log('Timer Stopped - data = ', data);
});

// Add timer
$scope.addTask = function() {
$scope.tasks.push({libelle:"", project:"", team:"", performer:""})
timer.setSeconds(30);
}
// Save timers
$scope.Tasks = function() {
return $http({
method : 'POST',
url : contextPath + '/saveTasks',
data : data
})
.then(function successCallback(response) {
document.location.href = contextPath;
}, function errorCallback(response) {
console.log("Erreur lors de la mise à jour des tâches");
});
}
// Delete timer
$scope.deleteTask = function($index){
$scope.tasks.splice($index, 1);
}